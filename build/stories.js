(()=>{"use strict";(()=>{const t=function(){function t(t){var e=t.title,a=t.subtitle;this.element=document.createElement("div"),this.title=e,this.subtitle=a}return t.prototype.render=function(){this.element.classList.add("header");var t=document.createElement("h2");t.classList.add("headline","header__title"),t.innerText+=this.title,this.element.appendChild(t);var e=document.createElement("h3");return e.classList.add("text","header__subtitle"),e.innerText+=this.subtitle,this.element.appendChild(e),this},t.prototype.getElement=function(){return this.element},t}(),e=function(){function t(){this.element=document.createElement("div")}return t.prototype.setAvatar=function(t){var e=this.element.querySelector(".user-card__avatar");e&&this.element.removeChild(e);var a=document.createElement("div");a.classList.add("user-card__avatar","avatar"),this.element.appendChild(a);var i=document.createElement("img");i.src="assets/images/"+t,a.appendChild(i)},t.prototype.setName=function(t){var e=this.element.querySelector(".user-card__name");e&&this.element.removeChild(e);var a=document.createElement("p");a.classList.add("user-card__name","text","--text_truncation"),a.innerText+=t,this.element.appendChild(a)},t.prototype.setCaption=function(t){var e=this.element.querySelector(".user-card__caption");e&&this.element.removeChild(e);var a=document.createElement("p");a.classList.add("user-card__caption","caption","--text_truncation"),a.innerText+=t,this.element.appendChild(a)},t.prototype.setEmoji=function(t){var e=this.element.querySelector(".user-card__emoji");e&&this.element.removeChild(e);var a=document.createElement("p");a.classList.add("user-card__emoji"),a.innerText+=t,this.element.prepend(a)},t.prototype.hover=function(t){t?(this.element.classList.add("user-card--hoverable"),this.active(!1)):this.element.classList.remove("user-card--hoverable")},t.prototype.active=function(t){t?(this.element.classList.add("user-card--active"),this.hover(!1)):this.element.classList.remove("user-card--active")},t.prototype.render=function(t){var e=t.user,a=t.caption,i=t.style,r=t.orientation,n=t.emoji,s=t.hoverable;return this.element.classList.add("user-card","user-card--style_"+(i||"none"),"user-card--"+(r||"vertical")),this.setAvatar(e.avatar),this.setName(e.name),a&&this.setCaption(e.valueText),n&&this.setEmoji(n),s&&this.hover(!0),this},t.prototype.getElement=function(){return this.element},t}(),a=function(){function t(){this.margin={3:["0","13%","26.5%"],4:["0","13%","26.5%",""],5:["0","3%","3%","6%","6%"]},this.element=document.createElement("div")}return t.prototype.render=function(t){var e=t.winners,a=t.orientation;this.element.classList.add("podium");for(var i=e.length,r=0;r<i;r++){var n=document.createElement("div");n.classList.add("podium__step"),n.style.zIndex=String(i-r),n.style.marginTop=String(this.margin[i][r]),e[r].winner.getElement().classList.add("podium__user-card"),n.append(e[r].winner.getElement());var s=document.createElement("p");if(s.classList.add("headline","podium__place-number"),s.innerText=String(e[r].place+1),n.classList.add("--background_"+(0==r?"primary":"secondary")),"vertical"==a&&3==r){var o=document.createElement("div");o.classList.add("podium__divider"),n.append(o),n.style.zIndex=String(i),n.classList.add("podium__step--position_extra"),n.classList.remove("--background_secondary"),s.classList.add("podium__place-number--position_extra"),this.element.append(n)}else r%2==0?(n.classList.add("podium__step--position_"+(0==r?"center":"left")),this.element.prepend(n)):(n.classList.add("podium__step--position_right"),this.element.append(n));n.append(s)}return this},t.prototype.getElement=function(){return this.element},t}(),i=function(){function t(t,e){this.params={vertical:{steps:3},horizontal:{steps:5}},this.data=t,this.orientation=e}return t.prototype.render=function(){var t=this,i=this.params[this.orientation].steps,r=document.createElement("div");r.classList.add("--align_bottom");for(var n=[],s=0;s<i;s++){var o=(new e).render({user:this.data.users[s],caption:!0,emoji:0==s?this.data.emoji:void 0});n.push({winner:o,place:s})}if(this.data.selectedUserId){var d=this.data.users.findIndex((function(e){return e.id===t.data.selectedUserId})),c=(new e).render({user:this.data.users[d],caption:!0,emoji:"👍"});d>0&&d<i?n[d].winner.setEmoji("👍"):"horizontal"==this.orientation&&d>=4?n[n.length-1]={winner:c,place:d}:"vertical"==this.orientation&&d>=3&&n.push({winner:c,place:d})}var l=(new a).render({winners:n,orientation:this.orientation});return r.append(l.getElement()),r},t.prototype.setOrientation=function(t){this.orientation=t},t}(),r=function(){function t(){this.svg='<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">         <path fill-rule="evenodd" clip-rule="evenodd" d="M32 62C48.5685 62 62 48.5685 62 32C62 15.4315 48.5685 2 32 2C15.4315 2 2 15.4315 2 32C2 48.5685 15.4315 62 32 62ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64ZM59 32C59 46.9117 46.9117 59 32 59C17.0883 59 5 46.9117 5 32C5 17.0883 17.0883 5 32 5C46.9117 5 59 17.0883 59 32ZM25.0607 27.9393C24.4749 27.3536 23.5251 27.3536 22.9393 27.9393C22.3536 28.5251 22.3536 29.4749 22.9393 30.0607L30.9393 38.0607C31.5251 38.6464 32.4749 38.6464 33.0607 38.0607L41.0607 30.0607C41.6464 29.4749 41.6464 28.5251 41.0607 27.9393C40.4749 27.3536 39.5251 27.3536 38.9393 27.9393L32 34.8787L25.0607 27.9393Z" />     </svg>',this.element=document.createElement("button")}return t.prototype.disabled=function(t){t?this.element.classList.add("button--disabled"):this.element.classList.remove("button--disabled")},t.prototype.render=function(t){var e=t.direction;return this.element.classList.add("button","button--direction_"+(e||"up")),this.element.innerHTML=this.svg,this},t.prototype.getElement=function(){return this.element},t}(),n=function(){function t(t,e){this.params={vertical:{order:[0,1,2,0,1,2,0,2],num:8,cols:3},horizontal:{order:[0,1,3,4,1,3],num:6,cols:5}},this.data=t,this.orientation=e}return t.prototype.render=function(){var t=this,a=this.params[this.orientation],i=(a.order,a.num),n=a.cols,s=this.data.offset||0,o=document.createElement("div");o.classList.add("user-grid","--align_center");var d=(new r).render({direction:"up"});d.getElement().classList.add("user-grid__button-up"),d.getElement().dataset.action="update",d.getElement().dataset.params=JSON.stringify({alias:"vote",data:{offset:s-i>0?s-i:0}});var c=(new r).render({direction:"down"});c.getElement().classList.add("user-grid__button-down"),c.getElement().dataset.action="update",c.getElement().dataset.params=JSON.stringify({alias:"vote",data:{offset:s+i<this.data.users.length?s+i:0}}),d.disabled(0==s),c.disabled(s+i>=this.data.users.length);for(var l=[],p=0;p<n;p++){var u=document.createElement("div");u.style.order=String(p+1),u.classList.add("user-grid__column"),o.append(u),l.push(u),p+1==Math.ceil(n/2)&&(u.append(d.getElement()),u.append(c.getElement()))}var h=this.data.users.slice(s,s+i).map((function(t){return(new e).render({user:t,hoverable:!0})}));if(this.data.selectedUserId){var m=this.data.users.findIndex((function(e){return e.id===t.data.selectedUserId}));h[m].active(!0),h[m].setEmoji("👍")}for(p=0;p<i;p++){var f;p<h.length?((f=h[p].getElement()).dataset.action="update",f.dataset.params=JSON.stringify({alias:"leaders",data:{selectedUserId:this.data.users[p].id}})):((f=document.createElement("div")).classList.add("user-card"),f.style.height="142px"),l[this.params[this.orientation].order[p]].append(f)}return o},t.prototype.setOrientation=function(t){this.orientation=t},t}(),s=function(){function t(t,e){this.data=t,this.orientation=e}return t.prototype.render=function(){var t=document.createElement("div");t.classList.add("--align_center");var a=document.createElement("div");a.classList.add("chart"),t.append(a);var i=Math.floor((window.innerWidth/2+188+8)/64);"horizontal"==this.orientation&&(i+=1);for(var r=Math.max.apply(Math,this.data.values.map((function(t){return t.value}))),n=this.data.values.findIndex((function(t){return t.active})),s=n-i+3;s<n+3;s++){var o=this.data.values[s]?this.data.values[s]:{title:"-",value:0,active:!1},d=o.title,c=o.value,l=(o.active,document.createElement("div"));l.classList.add("chart__sprint"),this.data.values[s]||(l.style.opacity="0.3"),a.append(l);var p=c/r*70,u=n==s?"primary":"secondary",h=document.createElement("p");h.classList.add("chart__commits","subhead","--color_"+u),h.innerText=String(c),l.append(h);var m=document.createElement("div");m.classList.add("chart__column","--background_"+u),m.style.height=0==p?"10px":String(p)+"%",l.append(m);var f=document.createElement("p");f.classList.add("chart__number","text"),f.innerText=d,l.append(f)}var v=document.createElement("div");for(v.classList.add("chart-top"),t.append(v),s=0;s<2;s++){var _=(new e).render({user:this.data.users[s],caption:!0,orientation:"horizontal"});if(v.append(_.getElement()),1!=s){var y=document.createElement("p");y.classList.add("chart-top__divider","divider"),v.append(y)}}return t},t.prototype.setOrientation=function(t){this.orientation=t},t}();var o=[["0 0 0 0 0.972549 0 0 0 0 0.618715 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 1 0 0 0 0 0.636666 0 0 0 0 0 0 0 0 0.9 0"],["0 0 0 0 0.575 0 0 0 0 0.365803 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 0.791667 0 0 0 0 0.504028 0 0 0 0 0 0 0 0 0.9 0"],["0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0","0 0 0 0 0.545833 0 0 0 0 0.545833 0 0 0 0 0.545833 0 0 0 0.9 0"],["0 0 0 0 0.375 0 0 0 0 0.375 0 0 0 0 0.375 0 0 0 0.2 0","0 0 0 0 0.15 0 0 0 0 0.15 0 0 0 0 0.15 0 0 0 0.9 0"]],d=[["0 0 0 0 1 0 0 0 0 0.69 0 0 0 0 0.225 0 0 0 0.9 0"],["0 0 0 0 1 0 0 0 0 0.69 0 0 0 0 0.225 0 0 0 0.4 0"],["0 0 0 0 0.4125 0 0 0 0 0.4125 0 0 0 0 0.4125 0 0 0 0.2 0"],["0 0 0 0 0.5125 0 0 0 0 0.5125 0 0 0 0 0.5125 0 0 0 0.6 0"]];function c(t){return t>3?"":'<filter id="light_filter_'+t+'" color-interpolation-filters="sRGB" x="-100" y="-100" width="200" height="200" filterUnits="userSpaceOnUse" >            <feFlood flood-opacity="0" result="BackgroundImageFix"/>           <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>           <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>           <feOffset/>           <feGaussianBlur stdDeviation="10"/>           <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>           <feColorMatrix type="matrix" values="'+d[t][0]+'"/>           <feBlend mode="normal" in2="shape" result="effect1_innerShadow"/>           <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>           <feOffset dx="-1" dy="1"/>           <feGaussianBlur stdDeviation="0.5"/>           <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>           <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>           <feBlend mode="normal" in2="effect1_innerShadow" result="effect2_innerShadow"/>           </filter>'}var l=[[{opacity:".8",offset:"0.71875",color:"#FFA300"},{opacity:".8",offset:"1",color:"#5B3A00"}],[{opacity:".5",offset:"0.7292",color:"#633F00"},{opacity:".5",offset:"1",color:"#0F0900"}],[{opacity:".5",offset:"0.71875",color:"#9B9B9B"},{opacity:".5",offset:"1",color:"#382900"}],[{opacity:".5",offset:"0.71875",color:"#4D4D4D"},{opacity:".5",offset:"1",color:"#382900"}]];function p(t){return t>3?"":'<radialGradient id="dark_fill_'+t+'" cx="0" cy="0" r="100" gradientUnits="userSpaceOnUse" gradientTransform="scale(1)">           <stop stop-opacity="'+l[t][0].opacity+'" offset="'+l[t][0].offset+'" stop-color="'+l[t][0].color+'"/>           <stop stop-opacity="'+l[t][1].opacity+'" offset="'+l[t][1].offset+'" stop-color="'+l[t][1].color+'"/>           </radialGradient>'}var u=[[{opacity:".56",offset:"0.8125",color:"#FFB800"},{opacity:".32",offset:"1",color:"#FFEF99"}],[{opacity:".24",offset:"0.8125",color:"#FFB800"},{opacity:".12",offset:"1",color:"#FFEF99"}],[{opacity:".1725",offset:"0.8281",color:"#A6A6A6"},{opacity:".05",offset:"0.9219",color:"#CBCBCB"}],[{opacity:".345",offset:"0.8281",color:"#BFBFBF"},{opacity:".1",offset:"0.9219",color:"#E4E4E4"}]];function h(t){return t>3?"":'<radialGradient id="light_fill_'+t+'" cx="0.5" cy="0.5" r="100" gradientUnits="userSpaceOnUse" gradientTransform="scale(1)">           <stop stop-opacity="'+u[t][0].opacity+'" offset="'+u[t][0].offset+'" stop-color="'+u[t][0].color+'"/>           <stop stop-opacity="'+u[t][1].opacity+'" offset="'+u[t][1].offset+'" stop-color="'+u[t][1].color+'"/>           </radialGradient>'}const m=function(){function t(){var t=this;this.RAD_DEG=Math.PI/180,this.PI2=2*Math.PI,this._pointOnArc=function(e,a,i){var r=(i-90)*t.RAD_DEG;return[e[0]+a*Math.cos(r),e[1]+a*Math.sin(r)]},this._drawCircle=function(t,e,a){var i=e-a,r=t[0],n=t[1];return["M",r-e,n,"A",e,e,0,1,0,r+e,n,"A",e,e,0,1,0,r-e,n,"M",r-i,n,"A",i,i,0,1,0,r+i,n,"A",i,i,0,1,0,r-i,n,"Z"]},this._drawSector=function(e,a,i,r,n,s){var o=a-n,d=Math.abs(r-i);(s=Math.min(n/2,s))/(Math.PI*(a-n))*360>Math.abs(i-r)&&(s=d/360*o*Math.PI);var c=o+s,l=a-s,p=t._pointOnArc(e,l,i),u=t._pointOnArc(e,l,r),h=t._pointOnArc(e,c,i),m=t._pointOnArc(e,c,r),f=s/(t.PI2*o)*360,v=s/(t.PI2*a)*360,_=t._pointOnArc(e,o,i+f),y=t._pointOnArc(e,o,r-f),g=t._pointOnArc(e,a,i+v),E=t._pointOnArc(e,a,r-v),x=d>180+2*v?1:0,L=d>180+2*f?1:0;return["M",p[0],p[1],"A",s,s,0,0,1,g[0],g[1],"A",a,a,0,x,1,E[0],E[1],"A",s,s,0,0,1,u[0],u[1],"L",m[0],m[1],"A",s,s,0,0,1,y[0],y[1],"A",o,o,0,L,0,_[0],_[1],"A",s,s,0,0,1,h[0],h[1],"Z"].join(" ")},this.element=document.createElement("div");var e=document.getElementsByTagName("body")[0].className.match(/theme_(.*)/);this.theme=e&&e.length>1&&("light"==e[1]||"dark"==e[1])?e[1]:"light"}return t.prototype.render=function(t){var e=t.percents.map((function(t){return 3.6*t}));this.element.classList.add("pie-chart");var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","-100 -100 200 200"),a.classList.add("pie-chart__svg"),this.element.append(a);for(var i,r=0,n=0;n<4;n++)if(0!=e[n]){a.innerHTML+="dark"==this.theme?(i=n)>3?"":'<filter id="dark_filter_'+i+'" x="-100" y="-100" width="200" height="200" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">          \n\n          <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n          <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n          \n          <feOffset/>\n          \n          <feGaussianBlur stdDeviation="10"/>\n          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n          <feColorMatrix type="matrix" values="'+o[i][1]+'"/>           <feBlend mode="normal" in2="shape" result="effect2_innerShadow"/>\n\n          </filter>':c(n),a.innerHTML+="dark"==this.theme?p(n):h(n);var s=document.createElement("path");s.setAttribute("d",this._drawSector([0,0],100,r+2+330,r+e[n]+330,30,6)),s.setAttribute("fill","url(#"+this.theme+"_fill_"+n+")"),s.setAttribute("filter","url(#"+this.theme+"_filter_"+n+")"),a.append(s),r+=e[n]}return this},t.prototype.getElement=function(){return this.element},t}(),f=function(){function t(t,e){this.data=t,this.orientation=e}return t.prototype.render=function(){var t=this.data.categories.map((function(t){return Number(t.valueText.substr(0,t.valueText.indexOf(" ")))})),e=t.reduce((function(t,e){return t+e})),a=t.map((function(t){return t/e*100}));console.log(a);var i=document.createElement("div");i.classList.add("diagram-page");var r=document.createElement("div");r.classList.add("diagram"),i.append(r);var n=(new m).render({percents:a});n.getElement().classList.add("diagram__pie-chart"),r.append(n.getElement());var s=document.createElement("div");s.classList.add("diagram__text-block"),r.append(s);var o=document.createElement("p");o.classList.add("diagram__title","vertical"==this.orientation?"headline":"subhead"),o.innerText=this.data.totalText,s.append(o);var d=document.createElement("p");d.classList.add("diagram__subtitle","subhead","vertical"==this.orientation?"subhead":"text"),d.innerText=this.data.differenceText,s.append(d);var c=document.createElement("div");c.classList.add("diagram-history"),i.append(c);for(var l=0;l<this.data.categories.length;l++){var p=this.data.categories[l],u=p.title,h=p.valueText,f=p.differenceText,v=document.createElement("div");v.classList.add("diagram-history__row"),c.append(v);var _=document.createElement("div");_.classList.add("diagram-history__dot","--style-diagram-"+l),v.append(_);var y=document.createElement("p");y.classList.add("diagram-history__title","text"),y.innerText=u,v.append(y);var g=document.createElement("p");g.classList.add("diagram-history__difference","text"),g.innerText=f.substr(0,f.indexOf(" ")),v.append(g);var E=document.createElement("p");if(E.classList.add("diagram-history__value","text"),E.innerText=h.substr(0,h.indexOf(" ")),v.append(E),l!=this.data.categories.length-1){var x=document.createElement("div");x.classList.add("diagram-history__divider","divider"),c.append(x)}}return i},t.prototype.setOrientation=function(t){this.orientation=t},t}(),v=function(){function t(t,e){this.days=["mon","tue","wed","thu","fri","sat","sun"],this.params={vertical:{hours:1,text:"1 час"},horizontal:{hours:2,text:"2 часа"}},this.data=t,this.orientation=e}return t.prototype.render=function(){for(var t=this.params[this.orientation],e=t.hours,a=t.text,i=[],r=0;r<7;r++){i.push([]);for(var n=0;n<24;n+=e){var s=this.days[r];"horizontal"==this.orientation?i[r].push(this.data.data[s][n]+this.data.data[s][n+1]):i[r].push(this.data.data[s][n])}}var o=[0,0,0,0],d=i.map((function(t){return Math.max.apply(Math,t)}));for(o[3]=Math.max.apply(null,d),r=1;r<3;r++)o[r]=o[r-1]+Math.floor(o[3]/3);var c=document.createElement("div");c.classList.add("activity-page");var l=document.createElement("div");l.classList.add("activity-chart"),c.append(l);var p="horizontal"==this.orientation?[7,24/e]:[24/e,7],u=p[0],h=p[1];for(r=0;r<u;r++)for(n=0;n<h;n++){for(var m=document.createElement("div"),f="horizontal"==this.orientation?i[r][n]:i[n][r],v=0;f>o[v];)v++;m.classList.add("activity-chart__polygon-"+v,"activity-chart__polygon"),l.append(m)}var _=document.createElement("div");for(_.classList.add("activity-history"),c.append(_),r=0;r<5;r++){var y=document.createElement("div");y.classList.add("activity-history__interval-"+r,"activity-history__interval"),_.append(y);var g=document.createElement("div");if(g.classList.add("activity-history__text","text"),0==r)g.innerText=a;else if(1==r)g.innerText=""+o[0];else{var E=o[r-2]+1!=o[r-1];g.innerText=E?o[r-2]+1+" — "+o[r-1]:""+o[r-1]}y.append(g)}return c},t.prototype.setOrientation=function(t){this.orientation=t},t}();window.renderTemplate=function(e,a){window.onresize=c,window.onload=c,e=e,a=a;var r,o=d();switch(e){case"leaders":r=new i(a,o);break;case"vote":r=new n(a,o);break;case"chart":r=new s(a,o);break;case"diagram":r=new f(a,o);break;case"activity":r=new v(a,o)}function d(){return window.innerWidth>window.innerHeight?"horizontal":"vertical"}function c(){var t=d();o!=t&&(o=t,r.setOrientation(t),document.body.innerHTML=l())}function l(){var e=document.createElement("div");e.classList.add("slide");var i=new t({title:a.title,subtitle:a.subtitle}).render();e.append(i.getElement());var n=r.render();return n.classList.add("slide-content"),e.append(n),e.outerHTML}return l()}})()})();